# yaml-language-server: $schema=https://raw.githubusercontent.com/jesseduffield/lazygit/master/schema/config.json

# Custom config overriding commands with graphite equivalents

customCommands:
  - key: c
    description: Graphite create stack
    command: gt create -m "{{index .PromptResponses 0}}"
    # I can't find how to trigger this while in the staging view
    context: files
    prompts:
      - type: input
        title: "Commit Message"
        initialValue: ""
    loadingText: creating stack...

  - key: P
    description: Graphite submit stack
    command: gt submit --stack --web=false --no-interactive --publish
    context: global
    loadingText: "submitting stack..."

  - key: A
    description: Graphite modify commit
    command: gt modify
    context: commits, files

  - key: f
    description: Graphite sync
    command: gt sync --no-interactive --restack
    context: commits

  - key: r
    description: Graphite rename commit
    command: gt modify -m "{{index .PromptResponses 0}}"
    context: commits, files
    prompts:
      - type: input
        title: "Commit Message"
        initialValue: ""
